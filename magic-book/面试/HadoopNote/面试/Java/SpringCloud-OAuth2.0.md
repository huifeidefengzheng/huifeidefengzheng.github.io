# SpringCloud oauth2.0

Q1：SpringSecurity的作用
Spring Security是一个可以为基于Spring的企业级应用系统提供声明式的安全访问控制解决方案的安全框架
充分利用了IoC、DI、AOP特性，可以在Spring应用上下文中配置Bean，从而为应用系统提供声明式的安全访问控制功能，可以减少大量重复代码
Spring Security在很多企业中作为后台角色权限框架，授权认证采用OAuth2.0，可以实现安全防护（防止跨站点请求）、Session攻击，并且与SpringMVC整合起来非常简单

Q2：SpringSecurity认证模式
Spring Security认证模式有两种：
一种是fromLogin表单提交认证模式，这种模式应用较多
一种是httpBasic浏览器与服务器做认证授权的模式

Q3：简单谈谈RBAC权限控制模型
是一种基于角色的权限访问控制（Role-Based Access Control）模型，代替了传统访问控制模式（自主访问、强制访问）
在RABC中，权限与角色关联，用户通过绑定为适当的角色而得到这些角色的权限，从而极大的简化了权限的管理
角色是为了完成各种不同业务场景的工作而创造，用户根据责任和资格从而被赋予不同的角色；角色可以依据新的需求而被赋予新的权限、或者回收权限

Q4：什么是微服务开放平台
在一些大型互联网公司中，随着公司业务的发展日渐庞大，需要和外部伙伴（商户）或者子公司进行合作，需要将公司的接口开放给外部其他或作伙伴进行调用，而统一管理这些接口的平台就称为微服务开放平台。
他可以提供接口以供外部调用，也可以获取具体是哪些合作商户进行调用；同时还有完善的授权机制流程从而可以灵活控制接口调用权限

Q5：微服务开放平台的应用场景
当需要与第三方合作伙伴进行业务交互，或者大型集团公司中总公司与分公司之间需要进行相互通讯时，都可以采用开放平台的形式对接口进行授权

Q6：Oauth2.0开放授权协议
OAuth（开放授权）是一个开放标准，允许用户授权第三方网站访问他们存储在另外的服务器提供者上的信息，而不需要将用户名和密码提供给第三方网站或者分享他们数据的所有内容
以QQ联合登录为例，它使用的就是OAuth2.0协议，进行授权认证时通常有以下几个步骤
1.生成授权链接，获取授权码
2.使用授权码获取accessToken
3.使用accessToken获取openId
4.使用openId获取用户信息
Q7：常用开放平台接口有那些
如腾讯的QQ互联网、微信开放平台、蚂蚁金服开放平台、微博开放平台等，可以实现QQ联合登录、微信扫码登录等第三方登录功能

Q8：如何构建微服务开放平台（请画图演示）
![img](SpringCloud-OAuth2.0/clip_image002.jpg)
合作机构（客户端）必须先调用OAuth2.0认证授权中心获取对应accessToken，然后使用accessToken调用微服务开放平台中的接口
请求先经过网关然后到OAuth2.0认证授权中心对accessToken进行认证，如果有效才能访问接口，否则无法访问
注意：同一个授权码只能使用一次，使用第二次就会报错

Q9：OAuth2四种授权方式
1.授权码（认证码）模式（Authorization code）：用在客户端与服务端应用之间的授权，response_type=code
2.简化（隐形）模式（Impilict）：应用在移动app或者web app（在移动设备上的，如在手机中调用微信来进行认证授权），response_type=token
3.密码模式（Resource Owner Password Credentials）：应用直接都是受信的，如都是由同一家公司开发，grant_type=password
4.客户端模式（Client Credentials）：用在应用API访问，grant_type=client_credential
一般情况下1,3应用比较多，2都是应用在移动端，4应用不多
